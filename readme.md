# Highload cup 2017

## Условия:

> Напишите быстрый сервер, который будет предоставлять Web-API для сервиса путешественников.
> 
> В начальных данных для сервера есть три вида сущностей: User (Путешественник), Location (Достопримечательность), Visit (Посещения). У каждой свой набор полей.
> 
> Необходимо реализовать следующие запросы:
> * GET /\<entity>/\<id> для получения данных о сущности
> * GET /users/\<id>/visits для получения списка посещений пользователем
> * GET /locations/\<id>/avg для получения средней оценки достопримечательности
> * POST /\<entity>/\<id> на обновление
> * POST /\<entity>/new на создание

## Описание решения

* В качестве ЯП был выбран Rust
* В качестве web-сервера был выбран Actix web
* Все данные данные хранятся в памяти
* Для экономии места на хранение повторящихся названий сущностей (страна, город, имя, фамилия) используются словари (см. dict.rs)
* Так как идентификаторы сущностей это инкрементируемый id (без пропусков), решено хранить сущности в векторах где индекс элемента вектора это id сущности.

Некоторые замеры на Macbook Pro M1 32Gb.
Запросы производились через Apache Bench с concurrency 10.

```
Получение сущности по ID
ab -k -c 10 -n 1000000 "http://127.0.0.1:8080/visit/1"
Requests per second:    200792.85 [#/sec] (mean)


Подсчет средней оценки достопримечательности
ab -k -c 10 -n 1000000 "http://127.0.0.1:8080/locations/1/avg"
Requests per second:    186147.60 [#/sec] (mean)

Получение посещений пользователя
ab -k -c 10 -n 1000000 "http://127.0.0.1:8080/locations/1/avg"
Requests per second:    124478.47 [#/sec] (mean)
```



Подробные условия задачи можно посмотреть в репозитории: https://github.com/MailRuChamps/hlcupdocs/blob/master/2017/TECHNICAL_TASK.md